open Nethereum.Web3

// This sample shows how to connect to Ethereum mainnet using Infura
// and check an account balance.

// Generate an instance of web3, using INFURA's mainnet url and our API key.
// For this sample, we’ll use a special API key `7238211010344719ad14a89db874158c`,
// but for your own project you’ll need your own key.
let generateWeb3Instance () =
    Web3(url = "https://mainnet.infura.io/v3/7238211010344719ad14a89db874158c")
 
// Check the balance of one of the accounts provisioned in our chain:
let checkBalance (web3: Web3) =
    let account = "0xde0b295669a9fd93d5f28d9ec85e40f4cb697bae"
    web3.Eth.GetBalance.SendRequestAsync account
        |> Async.AwaitTask
        |> Async.RunSynchronously
        |> printfn "Balance of Ethereum Foundation's account: %A"

[<EntryPoint>]
let main argv =
    generateWeb3Instance ()
    |> checkBalance
    0
